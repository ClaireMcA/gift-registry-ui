<mat-drawer-container class="example-container">
    <mat-drawer fxHide fxShow.gt-sm [opened]="true" #drawer mode="side">
        <fa-icon [icon]="faShoppingCart"></fa-icon><span>Your Items</span>
        <p *ngFor="let item of myRegistryItems$ | async">{{ item.title }}</p>
    </mat-drawer>
  
    <div *ngIf="{ registryItemsMap: registryItemsMap$ | async, user: user$ | async, xAndY: xAndY$ | async } as state" class="container">
        <div>
            <h2>REGISTRY</h2>

            <p>
                Thanks for even considering buying us a gift, please don’t feel obliged to purchase us anything for our wedding, we just appreciate that you’re able to make it to our celebrations (and we’re not just saying that - we mean it!). 
            </p>
        
            <p>
                However, we do understand that some people enjoy giving gifts and we won’t pretend it wouldn’t be a huge blessing. If you already have a gift idea, perhaps something you have loved in your own home, we would love (and prefer) that. If you want a little more direction than that, we have assembled a registry of the items we’ll find most useful for our home. Please feel no obligation to stick to this list, it is only meant as a guide.
            </p>
        
            <p>
                If you simply want to contribute cash (or a gift card), we will have a wishing well on the day. This money would go towards our ‘big ticket items’, like a mattress, a vacuum cleaner, a fridge, a coffee machine or even a bed frame.
            </p>

            <p>
                There are a couple of items on the list that we are a little fussier about, so we have included an attachment (click on the link icon) so you can see examples of things/colours we like.
            </p>
        
            <p>
                Thanks again! <br>
                Love Matt & Claire
            </p>
        </div>
        
        <div fxFlex="45" fxFlex.lt-md="100" class="category-container" *ngFor="let keyval of state.registryItemsMap | keyvalue">
            <h1>{{ keyval.key }}</h1>
            <mat-card appearance="outlined" *ngFor="let item of keyval.value; let first = first;" [ngClass]="{ 'mt-1': !first }">
                <mat-card-header>
                    <a *ngIf="item.hyperlink" href="//{{ item.hyperlink }}" target="_blank" mat-card-avatar mat-mini-fab color="primary"><fa-icon [icon]="faLink"></fa-icon></a>
                    <mat-card-title>{{ item.title }}</mat-card-title>
                    <mat-card-subtitle>{{ item.description }}</mat-card-subtitle>
                </mat-card-header>
    
                <span class="ml-auto">
                    <span *ngIf="item.userRegistered === state.user" class="double-lined">You're getting this item</span>
    
                    <button *ngIf="item.userRegistered !== state.user && item.userRegistered" mat-stroked-button color="primary" disabled>Too slow</button> 
                    <button *ngIf="item.userRegistered === state.user" (click)="deregister(item._id)" mat-stroked-button color="warn"><fa-icon [icon]="faTimes"></fa-icon></button> 
                    <button *ngIf="item.userRegistered !== state.user && !item.userRegistered" (click)="register($event, item._id, state.user)" mat-stroked-button color="primary">I'll get it</button>     
                </span>
            </mat-card>
        </div>
    
        <fa-icon [ngClass]="{ 'animate-plus': animatePlus$ | async }" [ngStyle]="{ top: state.xAndY?.y + 'px', left: state.xAndY?.x + 'px' }" class="plus" [icon]="faCartPlus"></fa-icon>
    </div>
</mat-drawer-container>

